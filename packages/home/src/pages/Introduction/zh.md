# Nad 是什么？

**Nad**，读音 [næd]，取自 **N**ot **a** **D**ocument 的首字母。
**这不是一个 API 文档工具！**
如果你需要的是 API 文档，那请使用大名鼎鼎的 [Swagger](https://swagger.io/) 或者其他同类产品。

简单而言，**Nad** 是一款 **打通语言边界** 的解决方案。提取出后端代码中的数据模型和接口方法，并生成对应的前端代码。

# 1. 快速上手

## 1.1. 后端部分

在使用之前要确保后端的 API 是基于标准 Spring Web 方式提供的。

### STEP 1. 在 pom.xml 中引入

```pom.xml
<dependency>
	<groupId>cn.lalaframework</groupId>
	<artifactId>nad-sdk</artifactId>
	<version>1.0.1-RELEASE</version>
</dependency>
```

### STEP 2. 在 Spring 中启用

```application.properties
nad.enable=true
```

## 1.2. 前端部分

### STEP 1. 安装依赖

```shell
npm install @huolala-tech/nad-cli --save
```

### STEP 2. 执行命令生成代码

在后端提供 API 的根 URL 之后，基于 URL 可以使用一下命令来生成对应的 ts 文件。

比如后端服务在本地启动，启动后的接口 URL 是 `http://localhost:8080`，希望生成的文件写入到 `src/api.ts`，则执行以下命令

```shell
npx nad http://localhost:8080 -o src/api.ts
```

### STEP 3. 在业务代码中使用

可以用 IDE 打开 `src/api.ts` 查看里面的接口定义，在业务代码中 import 对应的模块使用即可。如果后端代码中有足够详尽的注解，理论上生成的代码是保护所有细节的。

# 2. 扩展阅读

## 2.1. 背景知识

人与人之间的沟通靠语言和文字，程序与程序之间的沟通靠的是 API。但是程序与程序之间通常使用了不同的编程语言和框架。比如后端使用 Java，前端使用 TypeScript，移动端使用 OC、Swift 等。

就和人与人沟通时语言不通一样，程序与程序的语言不通，就导致不同端的开发团队需要耗费大量时间去互相理解。同时，还需要通过编写文档的形式来对 API 做大量的描述，人们把这种文档称之为接口文档。

长期以来，在大型项目中普遍都是用接口文档来做跨端跨团队的程序对接。可是，编写这些接口文档需要耗费大量时间。而且这并不是一次性的工作量，而是需要长期投入的。

产品和程序是在不断迭代更新的，接口文档也需要不断更新。研发人员一旦改动了程序，就需要去考虑修改接口文档。所以维护接口文档的工作量与日常开发工作是乘积关系，是研发过程中极为费时的一部分开销。

除了工作量的问题外，由于接口文档是人工维护的，还存在可靠性问题。在工程实践中「人」的参与会给结果带来一种不确定性。人一旦犯错，带来的后果将是不可预估的。

**Nad** 尝试提供一种无需接口文档的解决方案，来处理跨团队跨语言的程序对接。
它可以分析接口和数据的模型定义，从一种代码生成另一种代码。
**让 API 调用变得像是本地的函数调用一样**，在 IDE 中直接就可以提示出类型定义和注解。
